# M-ECLIPSES: MSSL Emission Calculation and Line Intensity Prediction for SOLAR-C EUVST-SW

  __  __        ______ _____ _      _____ _____   _____ ______  _____ 
 |  \/  |      |  ____/ ____| |    |_   _|  __ \ / ____|  ____|/ ____|
 | \  / |______| |__ | |    | |      | | | |__) | (___ | |__  | (___  
 | |\/| |______|  __|| |    | |      | | |  ___/ \___ \|  __|  \___ \ 
 | |  | |      | |___| |____| |____ _| |_| |     ____) | |____ ____) |
 |_|  |_|      |______\_____|______|_____|_|    |_____/|______|_____/ 

The M-ECLIPSES code (MSSL Emission Calculation and Line Intensity Predition for SOLAR-C EUVST-SW) is used to forward model the performance of the ESA/MSSL short wavelenth camera, par of the EUV spectrograph EUVST, on SOLAR-C.

## Usage Instructions

### 1. Generate contribution functions for the desired emission lines

Edit `make_gofnt.pro` to specify the desired emission lines and the location of the CHIANTI files. You can use CHIANTI to identify the required lines.

Run the following command:
```bash
idl -e "make_goft"
```

### 2. Run the line synthesis

Run the line synthesis using:
```bash
python synthesise_spectra.py
```

This step can require a lot of memory at full resolution. A fully synthesised atmosphere using the Cheung et al. (2018) atmosphere (doi:10.1038/s41550-018-0629-3) for the Fe XII 195.119 and 195.179 lines, including 5 background lines from each side, can be downloaded here:
[Download Synthesised Atmosphere](https://liveuclac-my.sharepoint.com/:f:/g/personal/ucasjem_ucl_ac_uk/Es-ts6rwXIlInAweGI7hmdMB5BoGqv9uSpIXOvMkzhS3cw?e=54si7R)

### 3. Simulate the instrument response

Run the instrument response function using:
```bash
python instr_response.py --config ./run/input/config.yaml
```

This can be looped in bash using:
```bash
for config in ./run/input/*.yaml; do
  python instr_response.py --config "$config"
done
```