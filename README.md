# M-ECLIPSES: MSSL Emission Calculation and Line Intensity Prediction for SOLAR-C EUVST-SW

The M-ECLIPSES code (MSSL Emission Calculation and Line Intensity Prediction for SOLAR-C EUVST-SW) is used to forward model the performance of the ESA/MSSL short wavelength camera, part of the EUV spectrograph EUVST, on SOLAR-C.

Contact: James McKevitt (jm2@mssl.ucl.ac.uk). License: Contact for permission to use.

The instrument response generated by this code will be updated during instrument development, testing, and commissioning.

## Installation

### From PyPI (recommended)

```bash
pip install m-eclipses
```

### From source

```bash
git clone https://github.com/jamesmckevitt/solc_euvst_sw_response.git
cd solc_euvst_sw_response
pip install -e .
```

## Usage Instructions

### Command Line Interface

After installation, you can run M-ECLIPSES from the command line:

```bash
# Show logo and basic usage
m-eclipses

# Run instrument response simulation
m-eclipses --config ./run/input/config.yaml

# Alternative short command
meclipses --config ./run/input/config.yaml
```

### Python API

You can also use M-ECLIPSES as a Python library:

```python
import euvst_response
from euvst_response import AluminiumFilter, Detector_SWC, Telescope_EUVST
```

### 1. Generate contribution functions for the desired emission lines

Edit `make_gofnt.pro` to specify the desired emission lines and the location of the CHIANTI files. You can use CHIANTI to identify the required lines.

Run the following command:
```bash
idl -e "make_goft"
```

### 2. Run the line synthesis

Run the line synthesis using:
```bash
python synthesise_spectra.py
```

This step can require a lot of memory at full resolution. A fully synthesised atmosphere using the Cheung et al. (2018) atmosphere (doi:10.1038/s41550-018-0629-3) for the Fe XII 195.119 and 195.179 lines, including 5 background lines from each side, can be downloaded here: https://liveuclac-my.sharepoint.com/:f:/g/personal/ucasjem_ucl_ac_uk/Es-ts6rwXIlInAweGI7hmdMB5BoGqv9uSpIXOvMkzhS3cw?e=54si7R

### 3. Simulate the instrument response

Run the instrument response function using:
```bash
m-eclipses --config ./run/input/config.yaml
```

This can be looped in bash using:
```bash
for config in ./run/input/*.yaml; do
  m-eclipses --config "$config"
done
```

## Acknowledgements

The SOLAR-C/EUVST-SW instrument is an ESA-funded contribution to the JAXA-led SOLAR-C mission. The EUVST-LW (long wavelength) instrument is contributed by NASA. The M-ECLIPSES code is developed and maintained at Mullard Space Science Laboratory (UCL).